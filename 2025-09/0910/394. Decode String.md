# 📝 알고리즘 문제 풀이 - 2025-09-08

## 문제 📖

- **문제 링크:** [leetcode - 394. Decode String](https://leetcode.com/problems/decode-string/description/)

- **문제 유형:** stack

- **난이도:** medium

- **풀이 시간:** ⏳ 40분
## ✍ 접근 방식

초기 접근 방식 2-stack 풀이법 (못 풀음)

이유 : 2-stack을 사용할려면 짝맞춰서 push/pop을 해야하는데 그러지 않음 -> 중첩 복원 못함!

**짝 맞춰 push/pop(문자열·숫자 스택을 항상 동시에): 중첩 복원에 필수**

불변식 
- **`[`를 만나면**
    - 지금까지 만든 문자열(`curStr`)과 반복횟수(`curNum`)를 **각각 `stringStack`, `numberStack`에 동시에 push**하고
    - **`curStr = ""`, `curNum = 0`으로 리셋**한다.
- **`]`를 만나면**
    - **`repeat = numberStack.pop()`**, **`prev = stringStack.pop()`*을 각각 꺼내고
    - *`curStr = prev + curStr.repeat(repeat)`*로 합친다.
        
        즉, 닫힌 괄호 안에서 만든 문자열을 바로 **“괄호 바깥에서 쌓인 이전 문자열”**과 결합한다.


괄호 구조는 “짝(pair)”로만 의미가 있다

```js

function decodeString(s) {
  const numStack = [];
  const strStack = [];
  let curNum = 0;
  let curStr = '';

  for (const ch of s) {
    if (ch >= '0' && ch <= '9') {
      curNum = curNum * 10 + (ch.charCodeAt(0) - 48); // 다자리 수
    } else if (ch === '[') {
      // 불변식: 두 스택에 동시에 push
      strStack.push(curStr);
      numStack.push(curNum);
      curStr = '';
      curNum = 0;
    } else if (ch === ']') {
      const repeat = numStack.pop();
      const prev = strStack.pop();
      curStr = prev + curStr.repeat(repeat); // 바깥과 결합
    } else {
      curStr += ch; // 알파벳
    }
  }
  return curStr;
}
```